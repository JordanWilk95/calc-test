<!DOCTYPE html>
<html>

<head>
    <title>Coin Calc Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>

<body>
    <h1>Coin calculator test</h1>
    <div class="container">
        <div id="mainContent" class="row">
            <div id="instructions" class="col-3 p-4">
                <ul>
                    <h2>Test rules:</h2>

                    <li>
                        <p>The test will use only:<br> £2, £1, 50p, 20p, 2p and 1p coins</p>
                    </li>
                    <li>
                        <p>Invalid inputs are:<br> "", "1x", "£1x.0p", "£p"</p>
                    </li>
                    <li>
                        <p>Full list of rulings can be found over
                            <a href="https://github.com/jdbreckenridge/coin-calc-test/">here:</a> </p>
                    </li>
                </ul>
            </div>
            <div class="col-1"></div>
            <div id="form" class="col-3 p-3">
                <div class="input-group">
                    <label for="number">Enter a number:</label> &nbsp; <br>
                    <input class="form-control" type="text" id="userInput" name="bar" />
                    <div class="input-group-append">
                        <button id="x" class="btn btn-primary" type="submit">Send
                     </button>
                    </div>
                </div>
            </div>
            <div class="col-1"></div>
            <div id="coinCalcContainer" class="col-3 p-5">
                <p>Results:</p>
                <div id="coinCalc">Your results will appear here!</div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <div id="part2" class="container">
        <div class="row">
            <div class="col-2">
            </div>
            <div id="readME" class="col-8">
                <h1 id="coin-calc-test">Coin Calc test</h1>
                <h2 id="summary">Summary</h2>
                <ul>
                    <li>
                        <p>I initially started of by creating the basic javascript function to produce the coin amounts. This was done by setting the values and the types. once those variables were setup i began making a function that would divide the reurn
                            value by the coin values to give the total amount of coins needed. then if the amount was greater than 0 then the function would start and would provide the total coins which was the cointypes equal to the amount of entered.
                            Then the next part was to match the userinput value to the coinvalues. This created the running totals of the amounts needed.</p>
                    </li>
                    <li>
                        <p>I then went on to create the node local server this required express package to be install to the project. I felt rather rusty with this and had to do some research to acheive it. I researched how to setup an endpoint using express
                            on stack overflow to get it all working correctly. This led to a static page for the index html working on local host.</p>
                    </li>
                    <li>
                        <p>I created an express endpoint to display the amounts this would be used to validate the inputs and output the coins amounts.</p>
                    </li>
                    <li>
                        <p>For the &quot;p&quot; to be removed from the string i simply used replace to remove it. </p>
                    </li>
                    <li>
                        <p>For the £ i first checked if the string included the symbol then if it did i removed it and multiplied the amount left over by 100 to convert the pounds amount into pence.</p>
                    </li>
                    <li>
                        <p>The . didn&#39;t require multiplication however i needed to set to two decimal places. So that when the dot was removed the amount would not be overly multiplied and coverted to the coins.</p>
                    </li>
                    <li>
                        <p>For the isNaN section of the function this was done to make sure that any string that wasn&#39;t caught by the pound or p logic was thrown as an error. This then prompts the user to enter a valid input.</p>
                    </li>
                </ul>
                <h3 id="improvements">Improvements</h3>
                <ul>
                    <li>The first improvement that comes to mind would be to change the result to appear dynamically using a fetch request. Rather than the user submitting a form and being redirected. This would allow the user to make multiple queries in
                        a row with having to go back.</li>
                </ul>
                <h3 id="experience">Experience</h3>
                <ul>
                    <li>Overall The test gave me a lot of challenges that required me to read up on different topics and find solutions to various problems. This has given me a lot of new experiences and valuable insights to how specific parts of node and
                        javascript worked. This experience will be very rewarding in future projects and help me solve more problems.</li>
                </ul>
                <h2 id="how-to-use">How to use</h2>
                <ul>
                    <li><code>npm i</code> </li>
                    <li><code>npm start</code> </li>
                    <li><a href="http://localhost:4060/">http://localhost:4060/</a></li>
                    <li>enter a number: &quot;£2.50&quot;, &quot;250&quot;, &quot;2.45&quot; will all produce valid inputs</li>
                    <li>invalid inputs are eg: empty strings, &quot;£p&quot;, &quot;1x&quot;</li>
                </ul>

            </div>
            <div class="col-2">
            </div>
        </div>
        <script>
            // Get the button element

            const button = document.getElementById('x');
            const userInput = document.getElementById('userInput');
            // Add "click" event listener so function runs when the button is clicked
            button.addEventListener('click', function() {
                console.log("click")
                fetch('/number?bar=' + userInput.value).then(res => res.json())
                    .then(json => {
                        console.log(json)
                        document.getElementById("coinCalc").innerHTML = `
                    	<p> Two pound: ${json.twopound || "zero"}</p>
                 		<p> Pound: ${json.pound || "zero"}</p>
                    	<p> Fifty: ${json.fifty || "zero"}</p>
                     	<p> Twenty: ${json.twenty || "zero"}</p>
                    	<p> Two: ${json.two || "zero"}</p>
                    	<p> One: ${json.one || "zero"}</p>
                    `;
                    }).catch(err => console.log('Rejected', err))
            });
        </script>

</body>